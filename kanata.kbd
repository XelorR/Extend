;; What to remap, initial keyboard state definition
(defsrc
  grv  1    2    3    4    5    6    7    8    9    0    -    =    bspc
  tab  q    w    e    r    t    y    u    i    o    p    [    ]    \
  caps a    s    d    f    g    h    j    k    l    ;    '    ret
  lsft z    x    c    v    b    n    m    ,    .    /    rsft
  lctl lmet lalt           spc            ralt rmet rctl
)

;; No change in language, standard qwerty used
;; Select layout and layout switching in your OS
(deflayer base
  grv  1    2    3    4    5    6    7    8    9    0    -    =    bspc
  tab  q    w    e    r    t    y    u    i    o    p    [    ]    \
  @esc @a   @s   @d   @f   g    h    @j   @k   @l   @;   '    ret
  lsft z    x    c    v    b    n    m    ,    .    /    rsft
  lctl lmet lalt         @space_nav       ralt rmet rctl
)

;; To disable home row mods and navigation layer on space
;; Useful for gaming, use ¬´switcher¬ª layer to select
(deflayer nomods
  grv  1    2    3    4    5    6    7    8    9    0    -    =    bspc
  tab  q    w    e    r    t    y    u    i    o    p    [    ]    \
  @esc a    s    d    f    g    h    j    k    l    ;    '    ret
  lsft z    x    c    v    b    n    m    ,    .    /    rsft
  lctl lmet lalt            spc           ralt rmet rctl
)

(deflayer navigation
  ‚éã    f1   f2   f3   f4   f5   f6   f7   f8   f9   f10  f11  f12  _
  ‚Üπ    A-f4 C-S-‚Üπ ‚Üπ   C-‚Üπ @term ‚éÄ    ‚á§    ‚Üë    ‚á•    ‚å¶    @smq @rub _
  ‚éã    ‚Äπ‚åò   ‚Äπ‚å•   @‚éà   ‚Äπ‚áß   ‚éô    @cw  ‚Üê    ‚Üì    ‚Üí    ‚å´    @emd _
  ‚áß‚Ä∫   C-z  C-x  C-c  C-v C-S-z ‚å•‚Ä∫   ‚áû    ‚ò∞    ‚áü    ‚§∂    _
  ‚éà‚Ä∫   ‚åò‚Ä∫  ‚å•‚Ä∫              _              _    _    _
)

;; Note on switcher layer.
;;
;; My language binding for system layouts (feel free to select yours):
;; - Ctrl-6 = Colemak
;; - Ctrl-7 = Diktor
;; - Ctrl-8 = Qwerty
;; - Ctrl-9 = –ô—Ü—É–∫–µ–Ω
;;
;; It can be earily set up in KDE Plasma or Windows 11.
;; Therefore, Diktor is only available in GNU Linux
;; and should be installed separately on other systems.

(deflayer switcher
 lrld XX    XX    XX    XX    XX    XX    XX    XX    XX    üîá    üîà‚àí   üîà+   XX
  XX  XX    @base @cmk  @dkt  XX    XX    XX    XX    XX    XX    XX    XX    XX
  XX  XX    XX    C-6   C-7 @base @nomods C-8   C-9   XX    XX    XX    XX
  XX  XX    XX    XX    XX    XX    XX    XX    XX    XX    XX    XX
  XX  XX    XX                XX          XX    XX    XX
)

;; Layout layers
;; not necessery, but just in case
;; try to use system layouts
(deflayer colemak
  grv  1    2    3    4    5    6    7    8    9    0    -    =    bspc
  tab  q    w    f    p    g    j    l    u    y    ;    [    ]    \
  @esc @ca  @cr  @cs  @ct  d    h    @cn  @ce  @ci  @co    '    ret
  lsft z    x    c    v    b    k    m    ,    .    /    rsft
  lctl lmet lalt         @space_nav       ralt rmet rctl
)
;; Diktor is implemented with unicode symbols, use with caution, prefer system layout
(deflayer diktor_unicode
  grv  @1–™   @2–¨   @3‚Ññ   @4%   @5:   @6;   @7-   @8dq  9     0      @star  =     bspc
  tab  @—Ü–¶   @—å—ä   @—è–Ø   @,?   @.!   @–∑–ó   @–≤–í   @–∫–ö   @–¥–î   @—á–ß    @—à–®    @—â–©    \
  @esc @d—É–£  @d–∏–ò  @d–µ–ï  @d–æ–û  @–∞–ê   @–ª–õ   @d–Ω–ù  @d—Ç–¢  @d—Å–°  @d—Ä–†   @–π–ô    ret
  lsft @—Ñ–§   @—ç–≠   @—Ö–•   @—ã–´   @—é–Æ   @–±–ë   @–º–ú   @–ø–ü   @–≥–ì   @–∂–ñ    rsft
  lctl lmet lalt         @space_nav       ralt rmet rctl
)

;; Variables and other settings
(defvar
  tap-time 200
  hold-time 150
)

(defalias
  space_nav (tap-hold 200 200 spc (layer-toggle navigation))
  esc (tap-hold 200 200 esc (layer-toggle switcher))
  base (layer-switch base)
  nomods (layer-switch nomods)
  cmk (layer-switch colemak)
  dkt (layer-switch diktor_unicode)

  term (macro C-8 50 lmet 250 S-t e r m i n a l 350 ret 50 C-6)
  emd (macro ralt 50 - - -)
  smq (macro C-8 50 ralt 50 S-, S-, 50 ralt 50 S-. S-. left 50 C-6)
  rub (macro C-8 50 ralt 50 = p 50 C-6)
  cw (caps-word 2000)

  ‚éà (one-shot 500 lctl)

  ;; qwerty modtaps
  a (tap-hold $tap-time $hold-time a lmet)
  s (tap-hold $tap-time $hold-time s lalt)
  d (tap-hold $tap-time $hold-time d lctl)
  f (tap-hold $tap-time $hold-time f lsft)
  j (tap-hold $tap-time $hold-time j rsft)
  k (tap-hold $tap-time $hold-time k rctl)
  l (tap-hold $tap-time $hold-time l ralt)
  ; (tap-hold $tap-time $hold-time ; rmet)

  ;; colemak modtaps
  ca (tap-hold $tap-time $hold-time a lmet)
  cr (tap-hold $tap-time $hold-time r lalt)
  cs (tap-hold $tap-time $hold-time s lctl)
  ct (tap-hold $tap-time $hold-time t lsft)
  cn (tap-hold $tap-time $hold-time n rsft)
  ce (tap-hold $tap-time $hold-time e rctl)
  ci (tap-hold $tap-time $hold-time i ralt)
  co (tap-hold $tap-time $hold-time o rmet)

  ;; diktor_unicode modetaps are below, in context with unicode definitions

  ;; Unicode symbols for Diktor layout
  ;; Row 1
  –™ (unicode –™)
  1–™ (fork 1 @–™ (lsft rsft))

  –¨ (unicode –¨)
  2–¨ (fork 2 @–¨ (lsft rsft))

  ‚Ññ (unicode ‚Ññ)
  3‚Ññ (fork 3 @‚Ññ (lsft rsft))

  4% (fork 4 S-5 (lsft rsft))

  5: (fork 5 S-; (lsft rsft))

  6; (fork 6 ; (lsft rsft))

  7- (fork 7 - (lsft rsft))

  8dq (fork 8 S-' (lsft rsft))

  star (fork S-8 S-- (lsft rsft))

  ;; Row 2
  —Ü (unicode —Ü)
  –¶ (unicode –¶)
  —Ü–¶ (fork @—Ü @–¶ (lsft rsft))

  —å (unicode —å)
  —ä (unicode —ä)
  —å—ä (fork @—å @—ä (lsft rsft))

  —è (unicode —è)
  –Ø (unicode –Ø)
  —è–Ø (fork @—è @–Ø (lsft rsft))

  , (unicode ,)
  ? (unicode ?)
  ,? (fork @, @? (lsft rsft))

  . (unicode .)
  ! (unicode !)
  .! (fork @. @! (lsft rsft))

  –∑ (unicode –∑)
  –ó (unicode –ó)
  –∑–ó (fork @–∑ @–ó (lsft rsft))

  –≤ (unicode –≤)
  –í (unicode –í)
  –≤–í (fork @–≤ @–í (lsft rsft))

  –∫ (unicode –∫)
  –ö (unicode –ö)
  –∫–ö (fork @–∫ @–ö (lsft rsft))

  –¥ (unicode –¥)
  –î (unicode –î)
  –¥–î (fork @–¥ @–î (lsft rsft))

  —á (unicode —á)
  –ß (unicode –ß)
  —á–ß (fork @—á @–ß (lsft rsft))

  —à (unicode —à)
  –® (unicode –®)
  —à–® (fork @—à @–® (lsft rsft))

  —â (unicode —â)
  –© (unicode –©)
  —â–© (fork @—â @–© (lsft rsft))

  ;; Row 3
  —É (unicode —É)
  –£ (unicode –£)
  —É–£ (fork @—É @–£ (lsft rsft))
  d—É–£ (tap-hold $tap-time $hold-time @—É–£ lmet)

  –∏ (unicode –∏)
  –ò (unicode –ò)
  –∏–ò (fork @–∏ @–ò (lsft rsft))
  d–∏–ò (tap-hold $tap-time $hold-time @–∏–ò lalt)

  –µ (unicode –µ)
  –ï (unicode –ï)
  –µ–ï (fork @–µ @–ï (lsft rsft))
  d–µ–ï (tap-hold $tap-time $hold-time @–µ–ï lctl)

  –æ (unicode –æ)
  –û (unicode –û)
  –æ–û (fork @–æ @–û (lsft rsft))
  d–æ–û (tap-hold $tap-time $hold-time @–æ–û lsft)

  –∞ (unicode –∞)
  –ê (unicode –ê)
  –∞–ê (fork @–∞ @–ê (lsft rsft))

  –ª (unicode –ª)
  –õ (unicode –õ)
  –ª–õ (fork @–ª @–õ (lsft rsft))

  –Ω (unicode –Ω)
  –ù (unicode –ù)
  –Ω–ù (fork @–Ω @–ù (lsft rsft))
  d–Ω–ù (tap-hold $tap-time $hold-time @–Ω–ù lsft)

  —Ç (unicode —Ç)
  –¢ (unicode –¢)
  —Ç–¢ (fork @—Ç @–¢ (lsft rsft))
  d—Ç–¢ (tap-hold $tap-time $hold-time @—Ç–¢ lctl)

  —Å (unicode —Å)
  –° (unicode –°)
  —Å–° (fork @—Å @–° (lsft rsft))
  d—Å–° (tap-hold $tap-time $hold-time @—Å–° lalt)

  —Ä (unicode —Ä)
  –† (unicode –†)
  —Ä–† (fork @—Ä @–† (lsft rsft))
  d—Ä–† (tap-hold $tap-time $hold-time @—Ä–† lmet)

  –π (unicode –π)
  –ô (unicode –ô)
  –π–ô (fork @–π @–ô (lsft rsft))

  ;; Row 4
  —Ñ (unicode —Ñ)
  –§ (unicode –§)
  —Ñ–§ (fork @—Ñ @–§ (lsft rsft))

  —ç (unicode —ç)
  –≠ (unicode –≠)
  —ç–≠ (fork @—ç @–≠ (lsft rsft))

  —Ö (unicode —Ö)
  –• (unicode –•)
  —Ö–• (fork @—Ö @–• (lsft rsft))

  —ã (unicode —ã)
  –´ (unicode –´)
  —ã–´ (fork @—ã @–´ (lsft rsft))

  —é (unicode —é)
  –Æ (unicode –Æ)
  —é–Æ (fork @—é @–Æ (lsft rsft))

  –± (unicode –±)
  –ë (unicode –ë)
  –±–ë (fork @–± @–ë (lsft rsft))

  –º (unicode –º)
  –ú (unicode –ú)
  –º–ú (fork @–º @–ú (lsft rsft))

  –ø (unicode –ø)
  –ü (unicode –ü)
  –ø–ü (fork @–ø @–ü (lsft rsft))

  –≥ (unicode –≥)
  –ì (unicode –ì)
  –≥–ì (fork @–≥ @–ì (lsft rsft))

  –∂ (unicode –∂)
  –ñ (unicode –ñ)
  –∂–ñ (fork @–∂ @–ñ (lsft rsft))
)
